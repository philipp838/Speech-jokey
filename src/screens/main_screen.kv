#:kivy 2.3.0

<MainScreen>:
    md_bg_color: self.theme_cls.secondaryContainerColor

    MDBoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            type: "small"
            size_hint_y: .3
            pos_hint: {"center_x": .5, "center_y": .5}

            MDTopAppBarLeadingButtonContainer:
                spacing: "15dp"
                padding: 40,0,0,10
                MDActionTopAppBarButton:
                    id: btn_menu
                    icon: "menu"
                    height: "56dp"
                    on_release: root.on_menu_open()

                MDButton:
                    pos_hint: {"center_x": .5, "center_y": .5}
                    id: btn_select_engine
                    style: "elevated"
                    height: "80dp"
                    on_release: root.on_select_tts_engine()

                    MDButtonIcon:
                        icon: "engine-outline"
                        theme_icon_color: "Custom"
                        icon_color: self.theme_cls.onPrimaryContainerColor
                    MDButtonText:
                        text: root.current_engine_text
                        theme_text_color: "Custom"
                        text_color: self.theme_cls.onPrimaryContainerColor
                MDButton:
                    pos_hint: {"center_x": .5, "center_y": .5}
                    id: btn_select_voice
                    style: "elevated"
                    height: "80dp"
                    on_release: root.on_select_voice()

                    MDButtonIcon:
                        icon: "account-voice"
                        theme_icon_color: "Custom"
                        icon_color: self.theme_cls.onPrimaryContainerColor
                    MDButtonText:
                        text: "current voice: \n" + root.selected_voice
                        theme_text_color: "Custom"
                        text_color: self.theme_cls.onPrimaryContainerColor

            MDTopAppBarTitle:
                #text: root.title
                pos_hint: {"center_x": .5, "center_y": .5}

            MDTopAppBarTrailingButtonContainer:
                spacing: "15dp"
                padding: 0,0,40,10
                MDFabButton:
                    id: btn_load
                    icon: "file-upload"
                    style: "large"
                    on_release: root.on_load_file()
                MDFabButton:
                    id: btn_save
                    icon: "content-save"
                    style: "large"
                    on_release: root.on_save_file()

        MDScrollView:
            adaptive_height: True
            MDTextField:
                id: text_main
                font_name: "symbola"
                mode: "filled"
                multiline: True
                size_hint_y: None
                adaptive_height: True
                #new:
                on_cursor: root.on_cursor_control()

        MDBoxLayout:
            adaptive_size: True
            orientation: 'horizontal'
            MDIcon:
                icon: "information-outline"
            MDLabel:
                adaptive_width: True
                id: label_status
                text: "developmental state"

        MDTopAppBar:
            type: "small"
            size_hint_y: .3
            pos_hint: {"center_x": .5, "center_y": .5, "bottom": 1}

            MDTopAppBarLeadingButtonContainer:
                spacing: "15dp"
                padding: 80,0,0,10

                MDFabButton:
                    id: btn_cursor_left
                    icon: "arrow-left-bold-box-outline"
                    style: "large"
                    on_release: root.on_cursor_left()
                MDFabButton:
                    id: btn_cursor_right
                    icon: "arrow-right-bold-box-outline"
                    style: "large"
                    on_release: root.on_cursor_right()
                MDFabButton:
                    id: btn_txt_size
                    icon: "format-size"
                    style: "large"
                    on_release: root.change_text_size()

            MDTopAppBarTitle:
                text: " "
                pos_hint: {"center_x": .5, "center_y": .5}

            MDTopAppBarTrailingButtonContainer:
                spacing: "15dp"
                padding: 0,0,80,10
                MDFabButton:
                    id: btn_ssml
                    icon: "emoticon"
                    style: "large"
                    on_press: root.on_ssml_button_click()
                MDFabButton:
                    id: btn_play
                    icon: "play-circle"
                    style: "large"
                    on_press: root.on_play()
                MDFabButton:
                    id: btn_synthesize
                    icon: "file-music"
                    style: "large"
                    on_press: root.on_synthesize()

<EmojiPopup>:
    title: "Select an Emoji for SSML"
    size_hint: None, None
    size: 400, 660
    auto_dismiss: True
    background: ''  # Entferne das Standard-Hintergrundbild des Popups
    background_color: 0.41, 0.41, 0.41, 1  # Setze die gesamte Hintergrundfarbe des Popups auf Grau (R, G, B, A)

    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 20

        Label:
            size_hint_y: None
            height: self.texture_size[1]
            halign: 'center'
            valign: 'middle'

        GridLayout:
            cols: 3
            padding: [20, 0, 20, 20]  # padding links, oben, rechts, unten
            spacing: 10
            size_hint: None, None
            size: 360, 525  # passt das GridLayout f√ºr die Buttons an
            pos_hint: {"center_x": 0.5}  # Zentriere das GridLayout horizontal

            Button:
                text: "‚è∏Ô∏è"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("‚è∏Ô∏è")
            Button:
                text: "üòê"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üòê")
            Button:
                text: "üôÇ"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üôÇ")
            Button:
                text: "üòÅ"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üòÅ")
            Button:
                text: "üîà"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üîà")
            Button:
                text: "üîâ"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üîâ")
            Button:
                text: "üîä"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üîä")
            Button:
                text: "üêå"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üêå")
            Button:
                text: "üö∂"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üö∂")
            Button:
                text: "üèÉ"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üèÉ")
            Button:
                text: "üó£Ô∏è‚¨áÔ∏è"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üó£Ô∏è‚¨áÔ∏è")
            Button:
                text: "üó£Ô∏è‚¨ÜÔ∏è"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üó£Ô∏è‚¨ÜÔ∏è")
            Button:
                text: "üó£Ô∏è‚è´"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üó£Ô∏è‚è´")
            Button:
                text: "üåè"
                font_name: "symbola"
                font_size: '40sp'
                size_hint: None, None
                size: 100, 100
                color: 0, 0, 0, 1
                background_normal: ''
                on_release: root.insert_emoji("üåè")

<Popups>:
    Label:
        text: "You selected the voice: " + root.voice_name
        halign: 'center'
        font_size: '20sp'
        color: 1, 1, 1, 1
        size_hint: 0.6, 0.2
        pos_hint: {"x":0.2, "top":1}

<CustomPopup>:
    title: ""
    separator_height: 0
    size_hint: 0.8, 0.4
    background_color: (0,0,0,0)

    BoxLayout:
        orientation: "vertical"
        padding: 0, 10, 10, 10
        spacing: 10
        border: 50
        border_color: (1,1,1,1)
        canvas.before:
            Color:
                rgba:(255/255,255/255,255/255,1)

            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [40]
        Label:
            text: root.content_text
            color: 0,0,0,1
            font_size: 25